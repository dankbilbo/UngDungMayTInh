<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google Calculator</title>
    <style>
        table, th, td
        {
            border: 1px solid black;
        }
        button
        {
            width: 100%;
        }
        table
        {
            ;
            border: 1px solid black;
            width: 30%;
            height: 100px;
        }
    </style>
</head>
<body>
<table align="center">
    <tr>
        <td colspan="4" style="height: 60px">
            <p id="demo2" align="right"></p>
        </td>
    </tr>
    <tr>
        <td colspan="4" style="height: 60px">
            <p id="demo1" align="right"></p>
        </td>
    </tr>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td><button id="reset">AC</button></td>
    </tr>
    <tr>
        <td><button id="num7">7</button></td>
        <td><button id="num8">8</button></td>
        <td><button id="num9">9</button></td>
        <td><button id="division">/</button></td>
    </tr>
    <tr>
        <td><button id="num4">4</button></td>
        <td><button id="num5">5</button></td>
        <td><button id="num6">6</button></td>
        <td><button id="multiplication">x</button></td>
    </tr>
    <tr>
        <td><button id="num1">1</button></td>
        <td><button id="num2">2</button></td>
        <td><button id="num3">3</button></td>
        <td><button id="subtraction">-</button></td>
    </tr>
    <tr>
        <td><button id="num0">0</button></td>
        <td></td>
        <td><button id="equal" >=</button></td>
        <td><button id="addition" >+</button></td>
    </tr>
</table>
<script>
    let str = "";
    // lap i tu 0 den 9 neu button i click add i to string va flagstring
    for(let i = 0; i < 10; i++)
    document.getElementById('num' + i).addEventListener('click', function() {
        document.getElementById('demo1').innerHTML += i ;
        str += i;
    });
    // button + click
    document.getElementById("addition").addEventListener("click", function() {
        // kiem tra neu ki tu flagstring thu length - 1 la so thi += dau
        let a = document.getElementById('demo1').innerHTML;
        if(str.charAt(str.length - 1) != "+" && str.charAt(str.length - 1) != "-" && str.charAt(str.length - 1) != "/" && str.charAt(str.length - 1) != "*" && str.charAt(str.length - 1) != ")")
        {

            a += "+";
            document.getElementById('demo1').innerHTML = a;
            // console.log(a);
            //add 0 vao dau neu an dau dau tien
            if(a.charAt(0) == "+")
            {
                a = "0" + a;
                document.getElementById('demo1').innerHTML = a;
                str = "(" + "0" + str + ")+";
            }
            else
            {
                // if(str.charAt(str.length - 1) != "+")
                // {
                //     str = "(" + str + ")+";
                // }
                str = "(" + str + ")+";
            }
        }
        else
            {
                let b = a.substring(0, a.length - 1);
                a = b + "+";
                document.getElementById("demo1").innerHTML = a;
                str = "(" + str + ")+";
                console.log("str : " + str);
            }
    });
    document.getElementById("subtraction").addEventListener("click", function() {
        let a = document.getElementById('demo1').innerHTML;
        if(str.charAt(str.length - 1) != "+" && str.charAt(str.length - 1) != "-" && str.charAt(str.length - 1) != "/" && str.charAt(str.length - 1) != "*")
        {
            a += "-";
            document.getElementById('demo1').innerHTML = a;
            if(a.charAt(0) == "-")
            {
                a = "0" + a;
                document.getElementById('demo1').innerHTML = a;
                str = "(" + "0" + str + ")-";
            }
            else
            {
                // if(str.charAt(str.length - 1) != "-")
                // {
                //     str = "(" + str + ")-";
                // }
                str = "(" + str + ")-";
            }
        }
        else
        {
            let b = a.substring(0, a.length - 1);
            a = b + "-";
            document.getElementById("demo1").innerHTML = a;
        }
    });
    document.getElementById("multiplication").addEventListener("click", function() {
        let a = document.getElementById('demo1').innerHTML;
        if(str.charAt(str.length - 1) != "+" && str.charAt(str.length - 1) != "-" && str.charAt(str.length - 1) != "/" && str.charAt(str.length - 1) != "*")
        {
            a += "*";
            document.getElementById('demo1').innerHTML = a;
            if(a.charAt(0) == "*")
            {
                a = "0" + a;
                document.getElementById('demo1').innerHTML = a;
                str = "(" + "0" + str + ")*";
            }
            else
            {
                // if(str.charAt(str.length - 1) != "*")
                // {
                //     str = "(" + str + ")*";
                // }
                str = "(" + str + ")*";
            }
        }
        else
        {
            let b = a.substring(0, a.length - 1);
            a = b + "*";
            document.getElementById("demo1").innerHTML = a;
        }
    });
    document.getElementById("division").addEventListener("click", function() {
        let a = document.getElementById('demo1').innerHTML;

        if(str.charAt(str.length - 1) != "+" && str.charAt(str.length - 1) != "-" && str.charAt(str.length - 1) != "/" && str.charAt(str.length - 1) != "*")
        {
            a += "/";
            document.getElementById('demo1').innerHTML = a;
            console.log("a : " + a);
            if(a.charAt(0) == "/")
            {
                a = "0" + a;
                document.getElementById('demo1').innerHTML = a;
                str = "(" + "0" + str + ")/";
            }
            else
            {
                // if(str.charAt(str.length - 1) != "/")
                // {
                //     str = "(" + str + ")/";
                // }
                str = "(" + str + ")/";
                console.log("str : " + str);
            }
        }
        else
        {
            let b = a.substring(0, a.length - 1);
            a = b + "/";
            document.getElementById("demo1").innerHTML = a;
        }
    });
    // button = click
    document.getElementById("equal").addEventListener("click", function(){
        let result;
        if(str.charAt(str.length - 1) != "+" && str.charAt(str.length - 1) != "-" && str.charAt(str.length - 1) != "/" && str.charAt(str.length - 1) != "*")
        {
            result = eval(str)
        }
        else{
            for(let i = str.length - 1; i >= 0; i--)
            {
                if(typeof(+str.charAt(i)) == "number")
                {
                    var b = str.substring(0, i);
                    console.log(b);
                    break;
                }
            }
                result = eval(b);
            }
        document.getElementById("demo2").innerHTML =
            "ANS = " + result.toString();
        document.getElementById('demo1').innerHTML = result.toString();
    });
    // button reset click
    document.getElementById("reset").addEventListener("click", function (){
        str = "";
        document.getElementById('demo1').innerHTML = "";
        document.getElementById("demo2").innerHTML = "";
    })
</script>
</body>
</html>